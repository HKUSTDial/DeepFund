// Database schema for DeepFund

Table portfolio {
  id varchar(36) [pk]
  name varchar(100) [not null]
  updated_at timestamp [default: `CURRENT_TIMESTAMP`]
  cashflow decimal(15,2) [not null]
  total_assets decimal(15,2) [not null]
  positions json [not null]
  llm_model varchar(50)
  llm_provider varchar(50)

  indexes {
    updated_at
  }
}

Table decision {
  id varchar(36) [pk]
  portfolio_id varchar(36) [ref: > portfolio.id, not null]
  updated_at timestamp [default: `CURRENT_TIMESTAMP`]
  ticker varchar(10) [not null]
  llm_prompt text
  action varchar(10) [not null]
  shares integer [not null]
  price decimal(15,2)
  justification text

  indexes {
    portfolio_id
    updated_at
  }
}

Table signal {
  id varchar(36) [pk]
  decision_id varchar(36) [ref: > decision.id, not null]
  updated_at timestamp [default: `CURRENT_TIMESTAMP`]
  ticker varchar(10) [not null]
  llm_prompt text
  signal varchar(10) [not null]
  justification text

  indexes {
    decision_id
    updated_at
  }
}